{% extends 'base.html' %}
{% set active = "Project" %}

{% block title %}
Project
{% endblock %}

{% block content %}
  <h1>My To-Do List</h1>
  <form method="post" action="{{ url_for('add_task') }}">
    {{ form.csrf_token }}
    <div class="form-group">
      <label for="task_name">Task Name:</label>
      <input type="text" class="form-control" id="task_name" name="task_name" required>
    </div>
    <div class="d-flex justify-content-center">
      <button type="submit" class="btn btn-primary mx-2">Add Task</button>
    </div>
  </form>

  {% if tasks %}
    <ul class="list-group mt-4">
      {% for task in tasks %}
        <li class="list-group-item {% if task.completed %}completed{% endif %}">
          <div class="d-flex justify-content-between">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="completed" name="completed" {% if task.completed %}checked{% endif %} onchange="event.target.form.submit()">
              <label class="form-check-label" for="completed">{{ task.name }}</label>
            </div>
            <div>
              <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn btn-secondary mx-2">Edit</a>
              <a href="{{ url_for('delete_task', task_id=task.id) }}" class="btn btn-danger mx-2">Delete</a>
            </div>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="mt-4">No tasks yet!</p>
  {% endif %}
{% endblock %}
