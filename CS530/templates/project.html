{% extends 'base.html' %}
{% set active = "project" %}

{% block title %}
Project
{% endblock %}

{% block content %}
    <main>
        <section class="container">
            <div class="list-column">
                <div class="list">
                    <div class="list-header">
                        <h2 class="list-title">To Do</h2>    
                            <div class="input-container">
                                <input type="text" placeholder="Enter a task" id="task-input">
                                <button class="add-card" onclick="addTask()">+ Add a Tast</button>
                            </div>
                        
                    </div>
                    <div class="list-body">
                        <ul id="todo-list" class="list" ondrop="drop(event, 'todo')" ondragover="allowDrop(event)">
                            
                        </ul>
                              
                    </div>
                
                    
                    <div class="list-footer">
                        <button class="delete-list">Delete List</button>
                    </div>
                </div>
                <div class="list">
                    <div class="list-header">
                        <h2 class="list-title">In Progress</h2>
                        <!-- <button class="add-card">+ Add a card</button> -->
                    </div>
                    <div class="list-body">
                        <ul id="inprogress-list" class="list" ondrop="drop(event, 'inprogress')" ondragover="allowDrop(event)">
                        </ul>
                    </div>
                    <div class="list-footer">
                        <button class="delete-list">Delete List</button>
                    </div>
                </div>
                <div class="list">
                    <div class="list-header">
                        <h2 class="list-title">Done</h2>
                        <!-- <button class="add-card">+ Add a card</button> -->
                    </div>
                    <div class="list-body">
                        <ul id="done-list" class="list" ondrop="drop(event, 'done')" ondragover="allowDrop(event)">
                        </ul>
                    </div>
                    <div class="list-footer">
                        <button class="delete-list">Delete List</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

<script>
//     const addCardButtons = document.querySelectorAll('.add-card');

//     addCardButtons.forEach(function(addCardButton) {
//         addCardButton.addEventListener('click', function() {
//             const card = document.createElement('div');
//             card.classList.add('card');

//             const title = document.createElement('input');
//             title.type = 'text';
//             title.contenteditable = true;
//             card.appendChild(title);

//             const description = document.createElement('textarea');
//             description.contenteditable = false;
//             card.appendChild(description);

//             title.value = '';
//             description.value = '';

//             description.addEventListener('input', function() {
//               this.style.height = 'auto';
//               this.style.height = this.scrollHeight + 'px';
//             });

//             const listBody = addCardButton.parentNode.nextElementSibling;
//             listBody.appendChild(card);

//       });
// });



        function allowDrop(event) {
            event.preventDefault();
          }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
          }

          function drop(event, status) {
            event.preventDefault();
            var data = event.dataTransfer.getData("text");
            var element = document.getElementById(data);
            var parent = element.parentNode;
            
            if (status === 'inprogress' && parent.id !== 'inprogress-list') {
              document.getElementById('inprogress-list').appendChild(element);
            } else if (status === 'done' && parent.id !== 'done-list') {
              document.getElementById('done-list').appendChild(element);
            } else if (status === 'todo' && parent.id !== 'todo-list') {
              document.getElementById('todo-list').appendChild(element);
            }
          }

        function addTask() {
            var input = document.getElementById('task-input');
            var task = input.value;
            if (task !== '') {
              var element = document.createElement('li');
              element.draggable = true;
              element.id = 'item' + (document.querySelectorAll('.list li').length + 1);
              element.innerHTML = task;
              element.ondragstart = function(event) {
                drag(event);
              }
              document.getElementById('todo-list').appendChild(element);
              input.value = '';
            }
          }
</script>



{% endblock %}
